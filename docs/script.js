(()=>{const e=Array.from(document.getElementById("sliders").children),t={connect:"lower",direction:"rtl",orientation:"vertical",pips:{mode:"steps",density:2},range:{min:-12,max:12},start:0,step:1,tooltips:!0},n=new(window.AudioContext||window.webkitAudioContext),o=n.createOscillator(),r=n.createGain(),i=new Array(e.length),a=new Array(e.length);let d=-1,s=!1;function c(){r.gain.value=0,d=-1}o.connect(r),r.connect(n.destination),e.forEach(((e,n)=>{noUiSlider.create(e,t),e.noUiSlider.on("update",(([e])=>{const t=Math.pow(10,(e-12)/20);r.gain.value=a[n]=t}));const l=e.noUiSlider.target.getElementsByClassName("noUi-handle")[0];i[n]=l,l.addEventListener("focus",(()=>{s||(o.start(),s=!0),o.frequency.value=e.dataset.freqnum,r.gain.value=a[n],d=n})),l.addEventListener("blur",(()=>{c()}))})),document.getElementById("reset").addEventListener("click",(()=>{e.forEach((e=>{e.noUiSlider.reset(),c()})),handle.addEventListener("touchend",(function(){this.focus()}))})),window.addEventListener("keydown",(t=>{"Escape"===t.key?i[d].blur():"ArrowRight"===t.key?(t.stopPropagation(),d<e.length-1&&(d++,i[d].focus())):"ArrowLeft"===t.key&&(t.stopPropagation(),d>0&&(d--,i[d].focus()))}),{capture:!0})})();
